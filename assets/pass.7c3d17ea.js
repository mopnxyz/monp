import{h as me,j as ue,k as pe,l as fe,e as he}from"./el-collapse-item.23c377ba.js";import{d as _e,a3 as Se,a2 as ve,aa as ye,a1 as xe,ab as ge,g as H,B as we,ac as Pe,h as $,K as be,o,c as l,b as e,e as t,t as _,a as b,E as Te,l as U,F as R,C as z,y as Ce,n as Ne,D as W,ad as Ee,ae as ke,af as p,ag as T,ah as Me,ai as L,aj as Z}from"./app.93aad4dd.js";import{d as O,u as Oe,h as q,m as J,E as De,a as K,M as Q,S,f as Be,p as Fe}from"./whitelist.68ed74c0.js";import"./events.49e0d246.js";const Ie=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"_whitelistCID",type:"string"}],name:"setWhitelistCID",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"whitelistCID",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],Ae={"max-w-8xl":"","mx-auto":"","mt-10":"","md:mt-30":"","px-8":""},He={"md:flex":"","justify-between":""},Le=e("h1",{block:"","md:hidden":"","text-28":"","text-primary":"","text-center":"","mb-10":""}," MOPN PASS ",-1),Ye={style:{width:"40%"},hidden:"","md:block":""},Ge=["src"],je={style:{width:"100%"},block:"","md:hidden":""},Ve=["src"],$e={"flex-1":""},Ue=e("h1",{hidden:"","md:block":"","text-48":"","font-bold":"","text-primary":""}," MOPN PASS ",-1),Re=e("p",{"text-desc":"","mt-10":"","leading-7":"","text-center":"","md:text-left":"","text-12":""}," Own 1/10981 of MOPN. Each pass has 91 blocks. Pass has the untilization of $Energy Recycle, Commnunity Governance, priority of following games. ",-1),ze={key:0,"mt-14":"","md:mt-20":"","text-primary":"","text-13":"","text-center":"","md:text-left":""},We={key:1,"text-desc":"","mt-20":"","text-12":"","leading-8":""},Ze={key:2,"mt-5":"","md:pr-18":""},qe={key:0,"md:flex":"","items-end":"","justify-between":""},Je={key:0,"text-center":"","md:text-left":""},Ke={key:0},Qe={"text-primary":"","text-16":"","md:text-20":""},Xe={"text-desc":"","ml-2":"","md:mr-6":"","text-12":""},et={key:1,"text-desc":""},tt={key:1,style:{width:"150px"},"mx-auto":""},at={flex:"","justify-between":""},it={"mt-10":"","md:mt-0":"","mr-2":"",class:"input-number"},st=e("span",{style:{color:"#261802"},"text-16":""},"MINT",-1),nt={key:1,"text-primary":"","text-30":""},rt={key:3,"text-primary":"","mt-10":"","text-16":"","md:text-20":""},ot={"mt-20":"","md:mt-50":""},lt=e("h1",{"text-center":"","text-16":"","md:text-32":"","text-primary":"","leading-10":""}," Holder Benefits ",-1),ct={grid:"","grid-cols-1":"","md:grid-cols-2":"","gap-10":"","mt-10":"","md:mt-30":""},dt={flex:"","justify-center":"","mb-0":"","md:mb-10":"","md:pr-30":""},mt={"pl-8":"","md:pl-0":""},ut={"text-13":"","md:text-14":"","text-primary":"","text-center":"","md:text-left":"",style:{"margin-left":"-28px"}},pt=e("span",{hidden:"","md:inline-block":""},"*",-1),ft={"text-desc":"","text-12":"","mt-7":"","leading-7":"","text-center":"","md:text-left":""},ht={"mt-20":"","md:mt-50":"","mb-10":""},_t=e("h1",{"text-center":"","text-16":"","md:text-32":"","text-primary":""}," Mint Plan ",-1),St={grid:"","grid-cols-1":"","md:grid-cols-3":"","gap-15":"","mt-16":"","md:mt-30":""},vt={absolute:"","text-13":"",class:"plan-index"},yt={"text-16":"","md:text-22":"","text-primary":""},xt={"text-12":"","my-8":"","text-desc":""},gt={key:0,"text-desc":"","text-12":""},wt={"mt-8":""},Pt={key:1,"text-desc":"","text-12":""},bt={key:0},Tt=e("div",null,"TBD",-1),Ct=e("div",{"mt-8":""}," TBD ",-1),Nt=[Tt,Ct],Et={key:1},kt=e("div",null,"Ended",-1),Mt=e("div",{"mt-8":""}," Ended ",-1),Ot=[kt,Mt],Dt=_e({__name:"pass",setup(Bt){O.extend(Oe);const D="0xBeD80008DCE9CAC7bBCED650c58617cB0715FC03",X="0xa10bCf2E3a60312A3B7EAE9Bc85ff7d079223e04",ee=1,{isConnected:te}=Se(),{address:g}=ve(),{data:ae}=ye(),d=me(),{chain:F}=xe(),{data:I}=ge({addressOrName:g.value}),i=d.SaleConfig,m=H(1),u=H(!1),ie=we("(max-width: 700px)"),se="https://mopn.infura-ipfs.io/ipfs/",ne="https://api.coingecko.com/api/v3/simple/price?ids=Ethereum&vs_currencies=usd",re=[{title:"Energy Recycle",description:"Each pass has 91 blocks\uFF0Cholders can recycle $Energy from $Props used on those blocks based on the Prop price, block level and Energy Content."},{title:"Community Governance",description:"Vote for which NFT collection can join in MOPN, and more governance rights in the future."},{title:"Priority",description:"MOPN is coming up with more interesting games, Pass Holder will have priority of those following games."},{title:"Potential Benefits",description:"Pass Holder are early users and backups of MOPN. MOPN will provide potential benefits for our pass holders."}],r=H([{index:0,number:"2,000",type:"Whitelist",start_time:"2022.12.31 00:00:00 UTC",planName:"Phase One",mintNum:2e3,publicSalePrice:!1,isStart:!0,price:null,mintType:"preSale",prePrice:"0.05ETH",nexPrice:"",mintPriceName:"preSalePrice"},{index:1,number:"3,000",type:"Public",start_time:"2023.1",planName:"Phase Two",mintNum:5e3,publicSalePrice:!0,isStart:!1,price:null,mintType:"secondSale",prePrice:"0.06ETH",nexPrice:"For every 10 sold, add 0.01 E",mintPriceName:"secondSalePrice"},{index:2,number:"5,981",type:"Public",start_time:"2023.3",planName:"Phase Three",mintNum:10981,publicSalePrice:!0,isStart:!1,price:null,mintType:"thirdSale",prePrice:"1.06ETH",nexPrice:"For every 10 sold, add 0.01 E",mintPriceName:"thirdSalePrice"}]),B=Pe(),A=async()=>{const a=await K({addressOrName:D,contractInterface:Q,signerOrProvider:B}).value,c=await a.saleConfig(),v=await a.totalSupply(),C=new Ee("https://polygon-rpc.com"),x=await new ke(X,Ie,C).whitelistCID();q.get(`${se}${x}`).then(w=>{w.status===200&&(d.SaleConfig.whitelistCID=w.data)});const s={preSaleStartTime:p.from(c.preSaleStartTime).toNumber(),preSalePrice:T(p.from(c.preSalePrice).toString()),secondSaleStartTime:p.from(c.secondSaleStartTime).toNumber(),thirdSaleStartTime:p.from(c.thirdSaleStartTime).toNumber(),secondSalePrice:T(p.from(c.secondSalePrice).toString()),thirdSalePrice:T(p.from(c.thirdSalePrice).toString()),totalSupply:p.from(v).toNumber()};r.value[0].start_time=O.unix(s.preSaleStartTime).format("YYYY.MM.DD HH:mm:ss Z"),r.value[1].start_time=O.unix(s.secondSaleStartTime).format("YYYY.MM.DD HH:mm:ss Z"),r.value[2].start_time=O.unix(s.thirdSaleStartTime).format("YYYY.MM.DD HH:mm:ss Z"),d.setSaleConfig(s)},h=O().unix(),n=$(()=>i.preSaleStartTime>0&&i.totalSupply<=r.value[0].mintNum?i.preSaleStartTime<=h?(r.value[0].start_time="On Going",{...r.value[0],price:i.preSalePrice,isStart:!0,now:h,startTime:i.preSaleStartTime}):{...r.value[0],price:i.preSalePrice,isStart:!1,now:h,startTime:i.preSaleStartTime}:i.secondSaleStartTime>0&&i.totalSupply>r.value[0].mintNum&&i.totalSupply<=r.value[1].mintNum?i.secondSaleStartTime<h?(r.value[1].start_time="On Going",{...r.value[1],isStart:!0,now:h,startTime:i.secondSaleStartTime,price:i.secondSalePrice}):{...r.value[1],isStart:!1,now:h,startTime:i.secondSaleStartTime,price:!1}:i.thirdSaleStartTime>0&&i.totalSupply>r.value[1].mintNum?i.thirdSaleStartTime<=h?(r.value[2].start_time="On Going",{...r.value[2],isStart:!0,startTime:i.thirdSaleStartTime,now:h,price:i.thirdSalePrice}):{...r.value[2],isStart:!1,startTime:i.thirdSaleStartTime,now:h,price:i.thirdSalePrice}:{...r.value[0]});q.get(ne).then(a=>{a.status===200&&(d.SaleConfig.ethPrice=a.data.ethereum.usd)}),be(()=>{A()});const y=a=>{throw S.error(a),u.value=!1,a},oe=async()=>{var N;if(!te.value)return!1;if(((N=F==null?void 0:F.value)==null?void 0:N.id)!==ee)return S.error("Unsupported network. Please switch to ethereum."),!1;const a=K({addressOrName:D,contractInterface:Q,signerOrProvider:Me(ae.value)}).value;let c=null;if(n.publicSalePrice?c=await a.getPublicSalePrice():c=i.preSalePrice,!c)return!1;u.value=!0;const v=await a.totalSupply(),C=p.from(v).toNumber();switch(m.value>n.value.mintNum-C&&y("Not enough quantity"),n.value.mintType){case"preSale":const x=L(c).toString(),s=Be(g.value),w=p.from(x).mul(m.value);s||y("Your address is not on the whitelist"),I.value.formatted<T(w)&&y("Insufficient funds in wallet");const Y=await Fe(g.value),E={from:g.value,value:p.from(x).mul(m.value)};E.gasLimit=await a.estimateGas.preSale(m.value,s.max,Y,E),E.gasLimit=parseInt(E.gasLimit.toNumber()*1.2);try{a.preSale(m.value,s.max,Y,E).then(P=>{try{B.value.waitForTransaction(P.hash).then(f=>{f.status&&f.status===1&&(S.success("Mint Success"),u.value=!1)})}catch(f){y("Mint Error")}}).catch(()=>{u.value=!1})}catch(P){y("Mint Error")}break;case"secondSale":const G=L(i.secondSalePrice).toString(),j=p.from(G).mul(m.value);I.value.formatted<T(j)&&y("Insufficient funds in wallet");const k={from:g.value,value:j};k.gasLimit=await a.estimateGas.secondSale(m.value,k),k.gasLimit=parseInt(k.gasLimit.toNumber()*1.2),a.secondSale(m.value,k).then(P=>{try{B.value.waitForTransaction(P.hash).then(f=>{f.status&&f.status===1?(S.success("Mint Success"),u.value=!1):(S.success("Mint Error"),u.value=!1)})}catch(f){S.error("Mint Error"),u.value=!1}}).catch(()=>{u.value=!1});break;case"thirdSale":L(i.secondSalePrice).toString();const V=p.from(G).mul(m.value);I.value.formatted<T(V)&&y("Insufficient funds in wallet");const M={from:g.value,value:V};M.gasLimit=await a.estimateGas.secondSale(m.value,M),M.gasLimit=parseInt(M.gasLimit.toNumber()*1.2),a.secondSale(m.value,M).then(P=>{try{B.value.waitForTransaction(P.hash).then(f=>{f.status&&f.status===1?(S.success("Mint Success"),u.value=!1):(S.success("Mint Error"),u.value=!1)})}catch(f){S.error("Mint Error"),u.value=!1}}).catch(()=>{u.value=!1});break}},le=$(()=>!n.value.isStart||d.SaleConfig.totalSupply>=n.value.mintNum),ce=a=>{const c=a.mintType===n.value.mintType,v=d.SaleConfig.totalSupply<n.value.mintNum;return{"plan-active":c&&v,plan:!c||!v}},de=a=>a.isStart?d.SaleConfig.totalSupply<a.mintNum?"On Going":"Ended":a.start_time?a.start_time:"TBD";return(a,c)=>{const v=ue,C=pe,N=he,x=fe;return o(),l("div",Ae,[e("div",He,[Le,e("div",Ye,[e("img",{width:"340",src:t(J)},null,8,Ge)]),e("div",je,[e("img",{width:"300","mx-auto":"",src:t(J)},null,8,Ve)]),e("div",$e,[Ue,Re,t(n).isStart&&t(D)!=="0x0"?(o(),l("div",ze," Mint Price ")):(o(),l("div",We," Minting is starting soon\uFF0CTime remaining ")),t(D)!=="0x0"?(o(),l("div",Ze,[t(n).isStart?(o(),l("div",qe,[e("div",null,[t(n).price?(o(),l("div",Je,[t(d).SaleConfig.totalSupply<t(n).mintNum?(o(),l("div",Ke,[e("span",Qe,_(t(n).price)+" ETH",1),e("span",Xe,"$"+_(parseFloat(t(n).price*t(d).SaleConfig.ethPrice).toFixed(2)==0?.01:parseFloat(t(n).price*t(d).SaleConfig.ethPrice).toFixed(2)),1)])):(o(),l("div",et," Ended "))])):(o(),l("div",tt,[b(v,{color:"#C2A44D",type:"circle"})]))]),e("div",at,[e("div",it,[b(t(De),{modelValue:t(m),"onUpdate:modelValue":c[0]||(c[0]=s=>Te(m)?m.value=s:null),size:t(ie)?"":"large",min:1,max:t(n).mintNum-t(d).SaleConfig.totalSupply>10?10:t(n).mintNum-t(d).SaleConfig.totalSupply},null,8,["modelValue","size","max"])]),b(N,null,{default:U(()=>[b(C,{class:"mobile-input-number md:w-full md:w-auto","mt-10":"","md:mt-0":"",loading:t(u),"loading-type":"rect",disabled:t(le),"md:ml-6":"",color:"radial-gradient(100% 508.08% at 100% 12.88%, #C2A44D 0%, #6B4C19 100%)",onClick:oe},{default:U(()=>[st]),_:1},8,["loading","disabled"])]),_:1})])])):(o(),l("div",nt,[b(x,{time:(t(n).startTime-t(n).now)*1e3,onEnd:A},null,8,["time"])]))])):(o(),l("div",rt,[b(x,{time:(1672416e3-t(h))*1e3,onEnd:A},null,8,["time"])]))])]),e("div",ot,[lt,e("div",ct,[(o(),l(R,null,z(re,s=>e("div",dt,[e("div",mt,[e("h5",ut,[pt,Ce(" "+_(s.title),1)]),e("p",ft,_(s.description),1)])])),64))])]),e("div",ht,[_t,e("div",St,[(o(!0),l(R,null,z(t(r),(s,w)=>(o(),l("div",{key:w,"text-center":"","py-15":"",relative:"",class:Ne(ce(s))},[e("div",vt,_(s.planName),1),e("h5",yt,_(s.number),1),e("p",xt,_(s.type),1),t(d).SaleConfig[s.mintPriceName]!==0&&t(d).SaleConfig[s.mintPriceName]!=="0.0"?(o(),l("div",gt,[e("p",null,_(t(d).SaleConfig[s.mintPriceName])+" ETH",1),e("p",wt,_(de(s)),1)])):(o(),l("div",Pt,[t(n).index<s.index?(o(),l("div",bt,Nt)):W("",!0),t(n).index>s.index?(o(),l("div",Et,Ot)):W("",!0)]))],2))),128))])])])}}});typeof Z=="function"&&Z(Dt);export{Dt as default};
